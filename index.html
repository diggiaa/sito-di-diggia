<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title>Electronics Project — Temperature & Humidity Sensor</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root{
      --ink:#0f2742; --ink-2:#41566f; --accent:#b77a58;
      --line:#e7ecf3; --brand:#1f5fff; --bg:#f8fafc; --white:#fff;
      --radius:14px; --pad:16px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',sans-serif;color:var(--ink);background:var(--bg);line-height:1.6}

    /* NAVBAR */
    nav{
      position:fixed; top:0; left:0; right:0; height:60px;
      display:flex; align-items:center; justify-content:space-between;
      padding:0 12px; background:rgba(255,255,255,.92);
      border-bottom:1px solid var(--line); backdrop-filter:saturate(120%) blur(6px);
      z-index:1000;
    }
    .brand{display:flex;align-items:center;gap:10px; font-family:'Montserrat',sans-serif; font-weight:700; color:var(--ink); font-size:18px}
    .brand i{width:22px;height:22px;stroke:var(--accent)}
    .edit-btn{background:transparent;border:1px solid #d9e1ee;color:var(--ink);padding:6px 12px;border-radius:10px;font-weight:600;cursor:pointer}
    .edit-btn[aria-pressed="true"]{background:#fff;border-color:var(--accent);color:var(--accent)}

    /* PROGRESS */
    #progress-bar{position:fixed; top:60px; left:0; height:3px; width:0%; background:var(--brand); z-index:999; transition:width .2s ease-out}

    /* PAGE */
    .page{max-width:1100px;margin:80px auto;padding:0 var(--pad)}

    /* HERO */
    .hero{position:relative; width:100%; aspect-ratio:16/7; border:1px solid var(--line); border-radius:var(--radius); overflow:hidden; margin-top:10px; display:block}
    @media (max-width:860px){ .hero{ aspect-ratio:4/5; } }
    .hero img{width:100%;height:100%;object-fit:cover}
    .hero-caption{position:absolute; left:16px; bottom:16px; background:rgba(255,255,255,.9); border:1px solid var(--line); padding:6px 10px; border-radius:10px; font-size:14px; color:var(--ink-2)}

    /* SECTIONS */
    .section{padding:28px 4px;border-bottom:1px solid var(--line)}
    .section h2{display:flex;align-items:center;gap:10px; font-family:'Montserrat',sans-serif; font-size:20px; color:var(--ink); margin-bottom:12px}
    .section h2 i{width:24px;height:24px;stroke:var(--accent)}
    .lead{color:var(--ink-2);font-size:16px;max-width:80ch}

    /* SLIDER */
    .catalog{background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:var(--pad)}
    .catalog-inner{display:grid;gap:12px}
    .item-image{aspect-ratio:4/3;background:#f3f6fb;border:1px solid var(--line);border-radius:12px;overflow:hidden}
    .item-image img{width:100%;height:100%;object-fit:contain;background:#fff}
    .item-text h3{margin-bottom:6px;color:var(--ink)}
    .item-text p{color:var(--ink-2)}
    .controls{display:flex;justify-content:center;gap:12px;margin-top:10px;flex-wrap:wrap}
    .arrow{width:42px;height:42px;border-radius:50%;border:1px solid var(--line);display:grid;place-items:center;cursor:pointer;background:#fff}
    .arrow i{width:20px;height:20px;stroke:var(--ink)}
    .dots{display:flex;gap:10px;align-items:center}
    .dot{width:9px;height:9px;border-radius:50%;background:#cfd8e6}
    .dot.active{background:var(--accent)}

    /* NOTES */
    .notes{position:relative;background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:var(--pad);color:var(--ink-2)}
    .notes.editing{outline:1px dashed var(--accent)}
    .notes.editing::after{content:"✏️ Edit mode";position:absolute;top:-20px;right:10px;background:var(--accent);color:#fff;font-size:12px;padding:2px 6px;border-radius:6px}
    footer{text-align:center;padding:20px;font-size:14px;color:var(--ink-2)}

    /* ===== FAB + MENU A TENDINA (2 colonne, sempre tutto visibile) ===== */
    .fab-menu{
      position:fixed; top:70px; left:12px;
      width:52px; height:52px; border-radius:50%; background:#fff;
      border:1px solid var(--line); box-shadow:0 4px 14px rgba(0,0,0,.08);
      display:grid; place-items:center; z-index:1100; cursor:pointer; touch-action:manipulation;
    }
    .fab-menu i{width:22px;height:22px;stroke:var(--ink)}
    .fab-menu:active{transform:scale(.98)}

    .menu-popover{
      position:fixed; left:12px; top:126px;   /* subito sotto il FAB */
      background:#fff; border:1px solid var(--line); border-radius:14px;
      box-shadow:0 12px 24px rgba(0,0,0,.15);
      padding:10px; z-index:1099;
      transform-origin: top left;
      transform: scale(.98); opacity:0; pointer-events:none;
      transition:opacity .18s ease, transform .18s ease, width .18s ease;
      /* larghezza e colonne sono gestite via JS per entrare sempre nello schermo */
    }
    .menu-popover.open{opacity:1; transform: scale(1); pointer-events:auto}

    .menu-header{display:flex; align-items:center; gap:8px; padding:4px 6px 10px; color:var(--ink-2); font-weight:700}
    .menu-header i{width:18px;height:18px;stroke:var(--accent)}

    .menu-list{
      display:grid; gap:10px;
      grid-template-columns: repeat(2, minmax(160px, 1fr)); /* 2 colonne fisse come nello screenshot */
      align-items:stretch;
    }
    .menu-tile{
      display:flex; align-items:center; gap:10px;
      padding:12px; border-radius:12px; text-decoration:none;
      color:var(--ink); font-weight:800;
      border:1px solid var(--line); background:#fff;
      min-height:48px;
      box-shadow:0 1px 0 rgba(0,0,0,.02);
    }
    .menu-tile i{width:18px; height:18px; stroke:var(--ink)}
    .menu-tile:active{transform:translateY(1px); background:#f6f8fc}

    /* backdrop per chiudere col tap fuori */
    .popover-backdrop{position:fixed; inset:0; z-index:1098; background:transparent; display:none}
    .popover-backdrop.show{display:block}
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav>
    <div class="brand"><i data-lucide="cpu"></i> Electronics Project</div>
    <button id="editToggle" class="edit-btn" aria-pressed="false">Modifica note</button>
  </nav>

  <!-- FAB + MENU -->
  <button id="fabMenu" class="fab-menu" aria-label="Open menu"><i data-lucide="menu"></i></button>
  <div id="popoverBackdrop" class="popover-backdrop"></div>

  <aside id="menuPopover" class="menu-popover" role="menu" aria-label="Section navigation" aria-hidden="true">
    <div class="menu-header"><i data-lucide="compass"></i>Navigation</div>
    <nav id="menuList" class="menu-list">
      <a class="menu-tile" href="#overview"><i data-lucide="home"></i><span>Overview</span></a>
      <a class="menu-tile" href="#description"><i data-lucide="info"></i><span>Description</span></a>
      <a class="menu-tile" href="#components"><i data-lucide="package"></i><span>Components</span></a>
      <a class="menu-tile" href="#circuit"><i data-lucide="circuit-board"></i><span>Circuit</span></a>
      <a class="menu-tile" href="#data"><i data-lucide="bar-chart-3"></i><span>Analyzed Data</span></a>
      <a class="menu-tile" href="#screens"><i data-lucide="smartphone"></i><span>App Screens</span></a>
      <a class="menu-tile" href="#circuit-notes"><i data-lucide="notebook-pen"></i><span>Circuit Notes</span></a>
      <a class="menu-tile" href="#data-notes"><i data-lucide="file-text"></i><span>Data Observations</span></a>
      <a class="menu-tile" href="#screens-notes"><i data-lucide="sticky-note"></i><span>Screens Notes</span></a>
      <a class="menu-tile" href="#how"><i data-lucide="zap"></i><span>How it Works</span></a>
      <a class="menu-tile" href="#contacts"><i data-lucide="users"></i><span>Contacts</span></a>
    </nav>
  </aside>

  <!-- Progress bar -->
  <div id="progress-bar"></div>

  <main class="page">
    <!-- HERO -->
    <a id="overview" class="hero">
      <img src="/images/hero.jpg" alt="Project overview image">
      <span class="hero-caption">General overview</span>
    </a>

    <!-- DESCRIPTION -->
    <section id="description" class="section">
      <h2><i data-lucide="info"></i> Project Description</h2>
      <p class="lead">
        We remotely monitor classroom humidity and temperature to support the theme
        <em>“Health and Wellbeing at School”.</em> The IoT device tracks environmental data in real time and
        helps optimize comfort and learning conditions.
      </p>
    </section>

    <!-- COMPONENTS slider -->
    <section id="components" class="section">
      <h2><i data-lucide="package"></i> Components</h2>
      <div class="catalog" id="comp-slider"></div>
    </section>

    <!-- CIRCUIT slider -->
    <section id="circuit" class="section">
      <h2><i data-lucide="circuit-board"></i> Circuit</h2>
      <div class="catalog" id="circuit-slider"></div>
    </section>

    <!-- DATA slider -->
    <section id="data" class="section">
      <h2><i data-lucide="bar-chart-3"></i> Analyzed Data</h2>
      <div class="catalog" id="data-slider"></div>
    </section>

    <!-- SCREENS slider -->
    <section id="screens" class="section">
      <h2><i data-lucide="smartphone"></i> App Screens</h2>
      <div class="catalog" id="screens-slider"></div>
    </section>

    <!-- NOTES -->
    <section id="circuit-notes" class="section">
      <h2><i data-lucide="notebook-pen"></i> Circuit Notes</h2>
      <div class="notes">
        <h3>Assembly & Safety</h3>
        <p>Write here any notes about wiring, PCB layout, isolation, CT clamp placement, etc.</p>
      </div>
    </section>

    <section id="data-notes" class="section">
      <h2><i data-lucide="file-text"></i> Data Observations</h2>
      <div class="notes">
        <h3>Key Findings</h3>
        <p>Add here longer observations: patterns over time, peak hours, correlations between humidity and consumption, etc.</p>
      </div>
    </section>

    <section id="screens-notes" class="section">
      <h2><i data-lucide="sticky-note"></i> Screens Notes</h2>
      <div class="notes">
        <h3>UI/UX</h3>
        <p>Explain how the app displays live readings, trends, alerts, and any navigation details.</p>
      </div>
    </section>

    <!-- HOW IT WORKS -->
    <section id="how" class="section">
      <h2><i data-lucide="zap"></i> How it Works</h2>
      <p class="lead">
        The sensor is calibrated via a smart plug with different loads (phone, PC, charger, etc.). Then the
        system is installed in the school electrical panels to monitor energy usage via IoT. Data is stored in Firebase.
      </p>
    </section>

    <!-- CONTACTS -->
    <section id="contacts" class="section">
      <h2><i data-lucide="users"></i> Contacts</h2>
      <p class="lead">
        <strong>Created by:</strong> Matteo Emanuele Di Giacomo &amp; Francesco Lombardi — <strong>Supervisor:</strong> Prof. Roberto Versari<br/>
        <strong>School/Course:</strong> ITIS Electronics — 5AEn
      </p>
    </section>

    <footer>&copy; 2025 — School Electronics Project</footer>
  </main>

  <script>
    lucide.createIcons();

    /* Progress bar */
    const progressBar=document.getElementById('progress-bar');
    window.addEventListener('scroll',()=>{
      const max=document.body.scrollHeight-window.innerHeight;
      progressBar.style.width=(window.scrollY/max*100)+'%';
    });

    /* Smooth scroll con offset */
    function smoothTo(id){
      const el=document.querySelector(id);
      if(!el) return;
      const offset = 80; // altezza navbar
      const y = el.getBoundingClientRect().top + window.scrollY - offset;
      window.scrollTo({top:y, behavior:'smooth'});
    }

    /* ===== MENU: 2 colonne SEMPRE VISIBILI ===== */
    const fab=document.getElementById('fabMenu');
    const popover=document.getElementById('menuPopover');
    const menuList=document.getElementById('menuList');
    const popBackdrop=document.getElementById('popoverBackdrop');

    function fitMenu(){
      // Forziamo 2 colonne, poi ridimensioniamo il contenitore per farlo entrare
      popover.style.width = '';              // reset
      popover.style.transform = 'scale(1)';  // reset

      // calcola altezza disponibile dal top del popover al fondo viewport
      const top = popover.getBoundingClientRect().top;
      const availH = window.innerHeight - top - 16; // margine fondo

      // misura altezza reale
      const h = popover.scrollHeight;

      if (h > availH) {
        // scala per far entrare tutto senza scroll
        const scale = Math.max(0.75, (availH / h));
        popover.style.transform = `scale(${scale})`;
        // evita tagli laterali dopo la scala: fissiamo width calcolata
        const w = popover.getBoundingClientRect().width / scale;
        popover.style.width = w + 'px';
      }
    }

    function openPopover(){
      popover.classList.add('open');
      popover.setAttribute('aria-hidden','false');
      popBackdrop.classList.add('show');
      fitMenu();
    }
    function closePopover(){
      popover.classList.remove('open');
      popover.setAttribute('aria-hidden','true');
      popBackdrop.classList.remove('show');
    }

    fab.addEventListener('click', ()=>{
      popover.classList.contains('open') ? closePopover() : openPopover();
    });
    popBackdrop.addEventListener('click', closePopover);
    window.addEventListener('resize', ()=>{ if(popover.classList.contains('open')) fitMenu(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePopover(); });

    // click: chiudi e vai alla sezione
    menuList.querySelectorAll('a').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id=a.getAttribute('href');
        if(id && id.startsWith('#')){
          e.preventDefault();
          closePopover();
          setTimeout(()=>smoothTo(id), 80);
        }
      });
    });

    /* ===== Slider builder (autoplay + touch) ===== */
    function makeSlider(elId, items){
      const wrap = document.getElementById(elId);
      wrap.innerHTML = `
        <div class="catalog-inner">
          <div class="item-image"><img id="${elId}-img" src="" alt=""/></div>
          <div class="item-text"><h3 id="${elId}-title"></h3><p id="${elId}-desc"></p></div>
        </div>
        <div class="controls">
          <button class="arrow" id="${elId}-prev" aria-label="Previous"><i data-lucide="chevron-left"></i></button>
          <div class="dots" id="${elId}-dots"></div>
          <button class="arrow" id="${elId}-next" aria-label="Next"><i data-lucide="chevron-right"></i></button>
        </div>`;
      lucide.createIcons();

      const imgEl   = document.getElementById(`${elId}-img`);
      const titleEl = document.getElementById(`${elId}-title`);
      const descEl  = document.getElementById(`${elId}-desc`);
      const dotsEl  = document.getElementById(`${elId}-dots`);
      const prevBtn = document.getElementById(`${elId}-prev`);
      const nextBtn = document.getElementById(`${elId}-next`);
      let index = 0, timer = null;

      function renderDots(){ dotsEl.innerHTML=''; items.forEach((_,i)=>{const d=document.createElement('span'); d.className='dot'+(i===index?' active':''); d.addEventListener('click',()=>goTo(i)); dotsEl.appendChild(d);});}
      function fadeSwap(cb){ imgEl.style.opacity=0; titleEl.style.opacity=0; descEl.style.opacity=0; setTimeout(()=>{ cb(); imgEl.style.opacity=1; titleEl.style.opacity=1; descEl.style.opacity=1; }, 120); }
      function update(){ fadeSwap(()=>{ imgEl.src=items[index].img; imgEl.alt=items[index].title||'slide'; titleEl.textContent=items[index].title||''; descEl.textContent=items[index].desc||''; renderDots();});}
      function goTo(i){ index=(i+items.length)%items.length; update(); }
      function startAuto(){ stopAuto(); timer=setInterval(()=>goTo(index+1),3500); }
      function stopAuto(){ if(timer){clearInterval(timer); timer=null;} }

      prevBtn.addEventListener('click', ()=>goTo(index-1));
      nextBtn.addEventListener('click', ()=>goTo(index+1));

      let x0=null;
      wrap.addEventListener('touchstart', e=>x0=e.touches[0].clientX,{passive:true});
      wrap.addEventListener('touchend', e=>{ if(x0===null) return; const dx=e.changedTouches[0].clientX-x0; if(Math.abs(dx)>40){ dx>0?goTo(index-1):goTo(index+1); } x0=null; });
      wrap.addEventListener('mouseenter', stopAuto);
      wrap.addEventListener('mouseleave', startAuto);

      update(); startAuto();
    }

    /* Datasets demo (sostituisci i path) */
    const compItems=[
      {title:'Arduino Uno',desc:'Main microcontroller board.',img:'/images/arduino.jpg'},
      {title:'DHT11 Sensor',desc:'Temperature and humidity sensor.',img:'/images/dht11.jpg'},
      {title:'SCT-013-030',desc:'Current sensor for AC.',img:'/images/sct.jpg'},
      {title:'16x2 LCD',desc:'Display for data output.',img:'/images/lcd.jpg'},
    ];
    const circuitItems=[
      {title:'Circuit Photo 1',desc:'Description of circuit 1.',img:'/images/circuit1.jpg'},
      {title:'Circuit Photo 2',desc:'Description of circuit 2.',img:'/images/circuit2.jpg'},
      {title:'Circuit Photo 3',desc:'Description of circuit 3.',img:'/images/circuit3.jpg'},
      {title:'Circuit Photo 4',desc:'Description of circuit 4.',img:'/images/circuit4.jpg'},
    ];
    const dataItems=[
      {title:'Data Graph 1',desc:'Observation about graph 1.',img:'/images/data1.jpg'},
      {title:'Data Graph 2',desc:'Observation about graph 2.',img:'/images/data2.jpg'},
      {title:'Data Graph 3',desc:'Observation about graph 3.',img:'/images/data3.jpg'},
      {title:'Data Graph 4',desc:'Observation about graph 4.',img:'/images/data4.jpg'},
    ];
    const screensItems=[
      {title:'App Screen 1',desc:'',img:'/images/screen1.jpg'},
      {title:'App Screen 2',desc:'',img:'/images/screen2.jpg'},
      {title:'App Screen 3',desc:'',img:'/images/screen3.jpg'},
    ];

    /* Init sliders */
    makeSlider('comp-slider',compItems);
    makeSlider('circuit-slider',circuitItems);
    makeSlider('data-slider',dataItems);
    makeSlider('screens-slider',screensItems);

    /* Edit notes */
    const editBtn=document.getElementById('editToggle');
    const notesEls=document.querySelectorAll('.notes');
    notesEls.forEach((el,i)=>{el.id='notes-'+i;const saved=localStorage.getItem(el.id);if(saved)el.innerHTML=saved});
    function setEditing(on){
      editBtn.setAttribute('aria-pressed',on);
      editBtn.textContent=on?'Salva note':'Modifica note';
      notesEls.forEach(el=>{
        el.contentEditable=on; el.classList.toggle('editing',on);
        if(on)el.addEventListener('input',saveHandler);
        else{el.removeEventListener('input',saveHandler);localStorage.setItem(el.id,el.innerHTML);}
      });
    }
    function saveHandler(e){localStorage.setItem(e.currentTarget.id,e.currentTarget.innerHTML)}
    editBtn.addEventListener('click',()=>{const isOn=editBtn.getAttribute('aria-pressed')==='true';setEditing(!isOn)});
  </script>
</body>
</html>
