<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title>Electronics Project — IoT Monitoring</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    /* ====== THEME (neon) ====== */
    :root{
      --ink:#ffffff;
      --muted:#e0e0e0;
      --panel: rgba(0,0,0,0.35);
      --border: rgba(255,255,255,0.22);
      --accent:#ff5edb;      /* rosa neon */
      --accent2:#00ff9d;     /* verde neon */
      --accent3:#00f2fe;     /* azzurro neon */
      --radius:14px;
    }

    /* Base */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: 'Inter', sans-serif;
      color: var(--ink);
      line-height: 1.6;
      background: linear-gradient(120deg, #4facfe, #00f2fe, #6a11cb, #2575fc);
      background-size: 600% 600%;
      animation: gradientBG 18s ease infinite;
      -webkit-font-smoothing: antialiased;
    }
    @keyframes gradientBG {
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    /* Navbar (solo brand + toggle edit) */
    nav{
      position:fixed; inset:0 0 auto 0; height:60px;
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 16px;
      background:rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
      border-bottom:1px solid var(--border);
      z-index:1000;
    }
    .brand{display:flex;align-items:center;gap:10px;font-family:'Montserrat',sans-serif;font-weight:700;color:#fff}
    .brand i{stroke:var(--accent);width:22px;height:22px}

    .edit-btn{
      background:transparent; color:#fff;
      border:1px solid rgba(255,255,255,.35);
      padding:6px 12px; border-radius:10px; font-weight:600; cursor:pointer;
    }
    .edit-btn[aria-pressed="true"]{background:rgba(255,255,255,.12); border-color:var(--accent)}

    /* Progress bar */
    #progress-bar{
      position:fixed; top:60px; left:0; height:3px; width:0%;
      background: linear-gradient(90deg, var(--accent2), var(--accent3));
      box-shadow:0 0 8px var(--accent3), 0 0 15px var(--accent2);
      z-index:999; transition: width .2s ease-out;
    }

    .page{max-width:1100px;margin:90px auto 64px;padding:0 18px}

    /* Hero */
    .hero{
      margin-top:80px;
      width:100%; aspect-ratio:16/7; max-height:520px;
      border-radius:var(--radius); overflow:hidden;
      box-shadow:0 6px 24px rgba(0,0,0,.45);
      position:relative;
      border:1px solid var(--border);
    }
    @media (max-width:860px){ .hero{aspect-ratio:4/5} }
    .hero img{width:100%;height:100%;object-fit:cover;display:block}
    .hero-overlay{
      position:absolute; inset:0;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      text-align:center; background:rgba(0,0,0,.45); color:#fff; padding:20px;
    }
    .hero-overlay h1{font-family:'Montserrat',sans-serif;font-size:40px;font-weight:700;margin-bottom:6px}
    .hero-overlay h2{font-size:22px;font-weight:600;margin-bottom:10px}
    .hero-overlay p{font-size:16px;color:var(--muted);max-width:740px}

    /* Sections */
    .section{padding:28px 4px; border-bottom:1px solid var(--border)}
    .section h2{display:flex;align-items:center;gap:10px;font-family:'Montserrat',sans-serif;font-size:22px;margin-bottom:12px;color:#fff}
    .section h2 i{stroke:var(--accent);width:26px;height:26px}
    .section p{color:var(--muted)}

    /* Slider (testo sotto la foto) */
    .catalog{
      position:relative; padding:18px;
      border:1px solid var(--border);
      border-radius:var(--radius); background:var(--panel);
      box-shadow: 0 4px 18px rgba(0,0,0,.28);
    }
    .catalog-inner{display:grid; grid-template-columns:1fr; gap:14px; align-items:start}
    .item-image{
      width:100%; aspect-ratio:4/3;
      background:rgba(255,255,255,0.06);
      border:1px solid var(--border);
      border-radius:12px; overflow:hidden
    }
    .item-image img{width:100%;height:100%;object-fit:contain;background:#000}
    .item-text{padding:2px 4px}
    .item-text h3{font-size:20px;margin-bottom:6px;color:var(--accent)}
    .item-text p{color:#dfe8ff}
    .controls{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:12px;flex-wrap:wrap}
    .arrow{width:42px;height:42px;border-radius:50%;border:1px solid var(--border);background:rgba(255,255,255,.08);display:grid;place-items:center;cursor:pointer}
    .arrow i{stroke:#fff;width:22px;height:22px}
    .dots{display:flex;gap:10px}
    .dot{width:9px;height:9px;border-radius:50%;background:#6e7b91;transition:.2s}
    .dot.active{background:var(--accent);transform:scale(1.15)}

    /* Reveal (sempre attivo) */
    .reveal{opacity:0;transform:translateY(24px);transition:opacity .5s ease,transform .5s ease}
    .reveal.in-view{opacity:1;transform:translateY(0)}

    /* Notes */
    .notes{
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:var(--radius); padding:16px; color:#e7e7e7;
      position:relative; box-shadow:0 4px 18px rgba(0,0,0,.28);
    }
    .notes h3{font-size:18px;margin-bottom:8px;color:var(--accent)}
    .notes p{margin-bottom:10px}
    .notes ul{margin-left:18px;margin-bottom:8px}
    .notes.editing{outline:1px dashed var(--accent)}
    .notes.editing::after{
      content:"✏️ Edit mode";
      position:absolute; top:-26px; right:10px;
      background:var(--accent); color:#000; font-size:12px;
      padding:2px 6px; border-radius:6px;
    }

    footer{margin-top:40px;color:#e0e0e0;font-size:14px;text-align:center}

    /* ===== FAB + MENU A TENDINA (2 colonne, tutte visibili) ===== */
    .fab-menu{
      position:fixed; top:70px; left:12px;
      width:52px; height:52px; border-radius:50%;
      background:rgba(0,0,0,.55);
      border:1px solid var(--border);
      display:grid; place-items:center; z-index:1100; cursor:pointer;
      box-shadow:0 6px 18px rgba(0,0,0,.35);
      touch-action:manipulation;
    }
    .fab-menu i{width:22px;height:22px;stroke:#fff}
    .fab-menu:active{transform:scale(.98)}

    .menu-popover{
      position:fixed; left:12px; top:126px;
      background:rgba(0,0,0,.65);
      border:1px solid var(--border);
      border-radius:14px; padding:10px; z-index:1099;
      transform-origin: top left;
      transform: scale(.98); opacity:0; pointer-events:none;
      transition:opacity .18s ease, transform .18s ease, width .18s ease;
      backdrop-filter: blur(6px);
      box-shadow:0 12px 26px rgba(0,0,0,.45);
    }
    .menu-popover.open{opacity:1; transform: scale(1); pointer-events:auto}

    .menu-header{display:flex; align-items:center; gap:8px; padding:4px 6px 10px; color:var(--muted); font-weight:700}
    .menu-header i{width:18px;height:18px;stroke:var(--accent)}

    .menu-list{
      display:grid; gap:10px;
      grid-template-columns: repeat(2, minmax(160px, 1fr)); /* 2 colonne fisse */
      align-items:stretch;
    }
    .menu-tile{
      display:flex; align-items:center; gap:10px;
      padding:12px; border-radius:12px; text-decoration:none;
      color:#fff; font-weight:800;
      border:1px solid var(--border); background:rgba(255,255,255,.06);
      min-height:48px;
      box-shadow:0 1px 0 rgba(0,0,0,.2);
    }
    .menu-tile i{width:18px; height:18px; stroke:#fff}
    .menu-tile:active{transform:translateY(1px); background:rgba(255,255,255,.12)}

    .popover-backdrop{position:fixed; inset:0; z-index:1098; background:transparent; display:none}
    .popover-backdrop.show{display:block}
  </style>
</head>
<body>
  <!-- NAVBAR (brand + pulsante edit) -->
  <nav>
    <div class="brand"><i data-lucide="cpu"></i> Electronics Project</div>
    <button id="editToggle" class="edit-btn" aria-pressed="false">Modifica note</button>
  </nav>

  <!-- FAB + MENU a tendina in 2 colonne -->
  <button id="fabMenu" class="fab-menu" aria-label="Open menu"><i data-lucide="menu"></i></button>
  <div id="popoverBackdrop" class="popover-backdrop"></div>

  <aside id="menuPopover" class="menu-popover" role="menu" aria-label="Section navigation" aria-hidden="true">
    <div class="menu-header"><i data-lucide="compass"></i>Navigation</div>
    <nav id="menuList" class="menu-list">
      <a class="menu-tile" href="#hero"><i data-lucide="home"></i><span>Overview</span></a>
      <a class="menu-tile" href="#description"><i data-lucide="info"></i><span>Description</span></a>

      <a class="menu-tile" href="#components"><i data-lucide="package"></i><span>Components</span></a>

      <a class="menu-tile" href="#circuit"><i data-lucide="circuit-board"></i><span>Circuit</span></a>
      <a class="menu-tile" href="#circuit-notes"><i data-lucide="notebook-pen"></i><span>Circuit Notes</span></a>

      <a class="menu-tile" href="#data"><i data-lucide="bar-chart-3"></i><span>Analyzed Data</span></a>
      <a class="menu-tile" href="#data-notes"><i data-lucide="file-text"></i><span>Data Observations</span></a>

      <a class="menu-tile" href="#screens"><i data-lucide="smartphone"></i><span>App Screens</span></a>
      <a class="menu-tile" href="#screens-notes"><i data-lucide="sticky-note"></i><span>Screens Notes</span></a>

      <a class="menu-tile" href="#function"><i data-lucide="zap"></i><span>How it Works</span></a>
      <a class="menu-tile" href="#contacts"><i data-lucide="users"></i><span>Contacts</span></a>
    </nav>
  </aside>

  <!-- Progress bar -->
  <div id="progress-bar"></div>

  <main class="page">
    <!-- HERO -->
    <div id="hero" class="hero reveal">
      <img src="/images/hero.jpg" alt="Project main photo"/>
      <div class="hero-overlay">
        <h1>IoT Project</h1>
        <h2>Electricity Consumption, Temperature & Humidity Monitoring</h2>
        <p>Smart solution for classrooms – tracking energy efficiency and wellbeing in real time</p>
      </div>
    </div>

    <!-- DESCRIPTION -->
    <section id="description" class="section reveal">
      <h2><i data-lucide="info"></i> Project Description</h2>
      <p>
        We remotely monitor classroom humidity and temperature to support the theme
        <em>“Health and Wellbeing at School”.</em> The IoT device tracks environmental data in real time and
        helps optimize comfort and learning conditions.
      </p>
    </section>

    <!-- COMPONENTS (slider) -->
    <section id="components" class="section reveal">
      <h2><i data-lucide="package"></i> Components</h2>
      <div class="catalog" id="comp-slider"></div>
    </section>

    <!-- CIRCUIT (slider 4 foto) -->
    <section id="circuit" class="section reveal">
      <h2><i data-lucide="circuit-board"></i> Circuit</h2>
      <div class="catalog" id="circuit-slider"></div>
    </section>

    <!-- CIRCUIT NOTES (immediatamente dopo) -->
    <section id="circuit-notes" class="section reveal">
      <h2><i data-lucide="notebook-pen"></i> Circuit Notes</h2>
      <div class="notes">
        <h3>Assembly & Safety</h3>
        <p>Write here any notes about wiring, PCB layout, isolation, CT clamp placement, etc.</p>
        <h3>Calibration Tips</h3>
        <ul>
          <li>Offset/scale for CT sensor</li>
          <li>Shielding / noise reduction</li>
          <li>Recommended load profiles</li>
        </ul>
      </div>
    </section>

    <!-- DATA (slider 4 foto) -->
    <section id="data" class="section reveal">
      <h2><i data-lucide="bar-chart-3"></i> Analyzed Data</h2>
      <div class="catalog" id="data-slider"></div>
    </section>

    <!-- DATA NOTES -->
    <section id="data-notes" class="section reveal">
      <h2><i data-lucide="file-text"></i> Data Observations</h2>
      <div class="notes">
        <h3>Key Findings</h3>
        <p>Add here longer observations: patterns over time, peak hours, correlations between humidity and consumption, etc.</p>
        <h3>Methodology</h3>
        <p>Sampling rate, smoothing, outlier handling, and any assumptions.</p>
      </div>
    </section>

    <!-- SCREENS (slider 3 foto) -->
    <section id="screens" class="section reveal">
      <h2><i data-lucide="smartphone"></i> App Screens</h2>
      <div class="catalog" id="screens-slider"></div>
    </section>

    <!-- SCREENS NOTES -->
    <section id="screens-notes" class="section reveal">
      <h2><i data-lucide="sticky-note"></i> Screens Notes</h2>
      <div class="notes">
        <h3>UI/UX</h3>
        <p>Explain how the app displays live readings, trends, alerts, and any navigation details.</p>
      </div>
    </section>

    <!-- HOW IT WORKS -->
    <section id="function" class="section reveal">
      <h2><i data-lucide="zap"></i> How it Works</h2>
      <p>
        The sensor is calibrated via a smart plug with different loads (phone, PC, charger, etc.).
        Then the system is installed in the school electrical panels to monitor energy usage via IoT.
        Data is stored in Firebase.
      </p>
    </section>

    <!-- CONTACTS -->
    <section id="contacts" class="section reveal">
      <h2><i data-lucide="users"></i> Contacts</h2>
      <p>
        <strong>Created by:</strong> Matteo Emanuele Di Giacomo &amp; Francesco Lombardi<br>
        <strong>Supervisor:</strong> Prof. Roberto Versari<br>
        <strong>School/Course:</strong> ITIS Electronics — 5AEn
      </p>
    </section>

    <footer>&copy; 2025 — School Electronics Project</footer>
  </main>

  <script>
    /* ===== Init icons ===== */
    lucide.createIcons();

    /* ===== Progress bar ===== */
    const progressBar=document.getElementById('progress-bar');
    window.addEventListener('scroll',()=>{
      const max=document.body.scrollHeight-window.innerHeight;
      progressBar.style.width=(window.scrollY/max*100)+'%';
    });

    /* ===== Reveal sempre attivo ===== */
    const obs=new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting) e.target.classList.add('in-view');
        else e.target.classList.remove('in-view');
      });
    },{threshold:0.12});
    document.querySelectorAll('.reveal').forEach(el=>obs.observe(el));

    /* ===== Smooth scroll con offset ===== */
    function smoothTo(id){
      const el=document.querySelector(id);
      if(!el) return;
      const offset=80;
      const y=el.getBoundingClientRect().top + window.scrollY - offset;
      window.scrollTo({top:y, behavior:'smooth'});
    }

    /* ===== MENU: 2 colonne sempre visibili (no scroll) ===== */
    const fab=document.getElementById('fabMenu');
    const popover=document.getElementById('menuPopover');
    const menuList=document.getElementById('menuList');
    const popBackdrop=document.getElementById('popoverBackdrop');

    function fitMenu(){
      popover.style.width=''; popover.style.transform='scale(1)';
      const top=popover.getBoundingClientRect().top;
      const availH=window.innerHeight - top - 16;
      const h=popover.scrollHeight;
      if(h>availH){
        const scale=Math.max(0.75, (availH/h));
        popover.style.transform=`scale(${scale})`;
        const w=popover.getBoundingClientRect().width/scale;
        popover.style.width=w+'px';
      }
    }
    function openPopover(){ popover.classList.add('open'); popover.setAttribute('aria-hidden','false'); popBackdrop.classList.add('show'); fitMenu(); }
    function closePopover(){ popover.classList.remove('open'); popover.setAttribute('aria-hidden','true'); popBackdrop.classList.remove('show'); }
    fab.addEventListener('click', ()=>{ popover.classList.contains('open') ? closePopover() : openPopover(); });
    popBackdrop.addEventListener('click', closePopover);
    window.addEventListener('resize', ()=>{ if(popover.classList.contains('open')) fitMenu(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePopover(); });

    // click su voce: chiudi e vai
    menuList.querySelectorAll('a').forEach(a=>{
      a.addEventListener('click', e=>{
        const id=a.getAttribute('href');
        if(id && id.startsWith('#')){
          e.preventDefault(); closePopover(); setTimeout(()=>smoothTo(id), 80);
        }
      });
    });

    /* ===== Slider builder (testo sotto + swipe + autoplay) ===== */
    function makeSlider(elId,items){
      const wrap=document.getElementById(elId);
      wrap.innerHTML=`
        <div class="catalog-inner">
          <div class="item-image"><img id="${elId}-img" src="" alt=""/></div>
          <div class="item-text"><h3 id="${elId}-title"></h3><p id="${elId}-desc"></p></div>
        </div>
        <div class="controls">
          <button class="arrow" id="${elId}-prev" aria-label="Previous"><i data-lucide="chevron-left"></i></button>
          <div class="dots" id="${elId}-dots"></div>
          <button class="arrow" id="${elId}-next" aria-label="Next"><i data-lucide="chevron-right"></i></button>
        </div>`;
      lucide.createIcons();

      const imgEl=document.getElementById(`${elId}-img`);
      const titleEl=document.getElementById(`${elId}-title`);
      const descEl=document.getElementById(`${elId}-desc`);
      const dotsEl=document.getElementById(`${elId}-dots`);
      const prev=document.getElementById(`${elId}-prev`);
      const next=document.getElementById(`${elId}-next`);
      let idx=0, timer=null;

      function render(){
        imgEl.src=items[idx].img; imgEl.alt=items[idx].title||'slide image';
        titleEl.textContent=items[idx].title||''; descEl.textContent=items[idx].desc||'';
        dotsEl.innerHTML='';
        items.forEach((_,i)=>{ const d=document.createElement('span'); d.className='dot'+(i===idx?' active':''); d.onclick=()=>{idx=i;render();}; dotsEl.appendChild(d); });
      }
      function go(i){ idx=(i+items.length)%items.length; render(); }
      prev.onclick=()=>go(idx-1); next.onclick=()=>go(idx+1);

      // autoplay + pausa on hover
      function start(){ stop(); timer=setInterval(()=>go(idx+1), 3500); }
      function stop(){ if(timer){clearInterval(timer); timer=null;} }
      wrap.addEventListener('mouseenter', stop);
      wrap.addEventListener('mouseleave', start);

      // swipe
      let x0=null;
      imgEl.addEventListener('touchstart', e=>x0=e.touches[0].clientX,{passive:true});
      imgEl.addEventListener('touchend', e=>{
        if(x0===null) return;
        const dx=e.changedTouches[0].clientX-x0;
        if(Math.abs(dx)>40) (dx>0?prev:next).click();
        x0=null;
      });

      render(); start();
    }

    /* ===== Datasets demo (sostituisci i path) ===== */
    const compItems=[
      {title:'Arduino Uno',desc:'Main microcontroller board.',img:'/images/arduino.jpg'},
      {title:'DHT11 Sensor',desc:'Temperature and humidity sensor.',img:'/images/dht11.jpg'},
      {title:'SCT-013-030',desc:'Current sensor for AC.',img:'/images/sct.jpg'},
      {title:'16x2 LCD',desc:'Display for data output.',img:'/images/lcd.jpg'},
    ];
    const circuitItems=[
      {title:'Circuit Photo 1',desc:'Description of circuit 1.',img:'/images/circuit1.jpg'},
      {title:'Circuit Photo 2',desc:'Description of circuit 2.',img:'/images/circuit2.jpg'},
      {title:'Circuit Photo 3',desc:'Description of circuit 3.',img:'/images/circuit3.jpg'},
      {title:'Circuit Photo 4',desc:'Description of circuit 4.',img:'/images/circuit4.jpg'},
    ];
    const dataItems=[
      {title:'Data Graph 1',desc:'Observation about graph 1.',img:'/images/data1.jpg'},
      {title:'Data Graph 2',desc:'Observation about graph 2.',img:'/images/data2.jpg'},
      {title:'Data Graph 3',desc:'Observation about graph 3.',img:'/images/data3.jpg'},
      {title:'Data Graph 4',desc:'Observation about graph 4.',img:'/images/data4.jpg'},
    ];
    const screensItems=[
      {title:'App Screen 1',desc:'',img:'/images/screen1.jpg'},
      {title:'App Screen 2',desc:'',img:'/images/screen2.jpg'},
      {title:'App Screen 3',desc:'',img:'/images/screen3.jpg'},
    ];

    makeSlider('comp-slider',compItems);
    makeSlider('circuit-slider',circuitItems);
    makeSlider('data-slider',dataItems);
    makeSlider('screens-slider',screensItems);

    /* ===== Edit mode con salvataggio locale ===== */
    const editBtn=document.getElementById('editToggle');
    const notesEls=[...document.querySelectorAll('.notes')].map((el,i)=>{ if(!el.id) el.id='notes-'+i; return el; });

    // ripristino contenuti salvati
    notesEls.forEach(el=>{ const saved=localStorage.getItem('notes:'+el.id); if(saved) el.innerHTML=saved; });

    function setEditing(on){
      editBtn.setAttribute('aria-pressed', on ? 'true' : 'false');
      editBtn.textContent = on ? 'Salva note' : 'Modifica note';

      notesEls.forEach(el=>{
        el.contentEditable = on ? 'true' : 'false';
        el.classList.toggle('editing', on);
        if(on) el.addEventListener('input', saveHandler);
        else { el.removeEventListener('input', saveHandler); localStorage.setItem('notes:'+el.id, el.innerHTML); }
      });
    }
    function saveHandler(e){ localStorage.setItem('notes:'+e.currentTarget.id, e.currentTarget.innerHTML); }
    editBtn.addEventListener('click', ()=>{ const isOn=editBtn.getAttribute('aria-pressed')==='true'; setEditing(!isOn); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && editBtn.getAttribute('aria-pressed')==='true') setEditing(false); });
  </script>
</body>
</html>


